<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="100%" height="100%">
	<mx:Script>
		<![CDATA[
			import bean.CheckinBean;
			import bean.DetalhesPropostaBean;
			import bean.JobCodeBean;
			import bean.JobControlBean;
			import bean.UsuarioBean;
			
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.core.IFlexDisplayObject;
			import mx.effects.AddItemAction;
			import mx.events.CloseEvent;
			import mx.events.ListEvent;
			import mx.managers.PopUpManager;
			import mx.rpc.events.ResultEvent;
			
			import util.ProgressBarHelper;
			private var urlLogin:String;
			private var urlReport:String;
			private var col1findSituacaoOS:String; // Variavel para pegar a primeira coluna da busca do combo de OS
			private var col2findSituacaoOS:String;// Variavel para pegar a segunda coluna da busca do combo de OS
			private var usuarioBean:UsuarioBean;
			private	var segmentoCampos:CriarSegmentoOS;
			//var conclusaoPopup:DataConclusaoPopUp = new DataConclusaoPopUp();
			
			public function init(urlLogin:String, usuarioBean:UsuarioBean):void{ // Método que inicia ao carregar componente. (Foi chamado através de GestaoEquipamentos)
				campoPesquisa.addEventListener(KeyboardEvent.KEY_DOWN,keyPressed);
				this.urlLogin = urlLogin;
				serviceController.findAllChekinByJobControl('');				
				cheGrid.addEventListener("SEGMENTAROS",segmentarOS); // Adiciona evento (imagem) e chama o método criarOsEstimada.
				cheGrid.addEventListener("LIBERAROSDIGITADOR", liberarOSDigitador); 
				cheGrid.addEventListener("FOTO", foto);
				cheGrid.addEventListener("ARQUIVO", arquivo);
				cheGrid.addEventListener("SERVICOSTERCEIROS", servicoTerceirosPopup);
				cheGrid.addEventListener("DESCRICAOSTATUSNEGOCIACAOCONSULTOR", descricaoStatusNegociacaoConsultor);	
				cheGrid.addEventListener("DATATERMINOSERVICO", dataTerminoServico);	
				cheGrid.addEventListener("DATAFATURAMENTO", dataFaturamento);	
				cheGrid.addEventListener("OBS", obsOS);
				cheGrid.addEventListener("DATASOS", datasOS);
				cheGrid.addEventListener("DATAORC", datasOrc);
				cheGrid.addEventListener("IMPRIMERELATORIO", imprimeRelatorio);
				cheGrid.addEventListener("DATAPREVISAO", dataPrevisao); 
				//cheGrid.addEventListener("CONCLUSAO", conclusao);				
				this.usuarioBean = usuarioBean;
				
			}
			
			private function dataPrevisao(ev:Event):void{
				
				if(CheckinBean(cheGrid.selectedItem).codCliente != null && CheckinBean(cheGrid.selectedItem).codCliente.length > 2){
					
					var codAux:String = CheckinBean(cheGrid.selectedItem).codCliente;
					var count:Number = codAux.length - 3;
					
					if((codAux.substring(count, codAux.length) == '241' || codAux.substring(count, codAux.length) == '246' || codAux.substring(count, codAux.length) == '234' || codAux.substring(count, codAux.length) == '292') && CheckinBean(cheGrid.selectedItem).tipoCliente == 'INT'){
						
						var dataPrevisaoPopup:dataPrevisaoPopUp = new dataPrevisaoPopUp();
						dataPrevisaoPopup.addEventListener(CloseEvent.CLOSE, removeDataPrevisaoPopUp);
						PopUpManager.addPopUp(dataPrevisaoPopup, this, true);
						PopUpManager.centerPopUp(dataPrevisaoPopup);
						dataPrevisaoPopup.init(urlLogin, CheckinBean(cheGrid.selectedItem).id, CheckinBean(cheGrid.selectedItem));
						if(CheckinBean(cheGrid.selectedItem).dataPrevisaoEntrega != null){
							dataPrevisaoPopup.dataPrevisao.text = CheckinBean(cheGrid.selectedItem).dataPrevisaoEntrega;
						}
						return;
					}					
					//return;
				}
					Alert.show("Não é permitido incluir ou alterar a data de previsão de entrega se não houver entrega de máquina para o cliente ou o cliente não seja interno.","Alerta!"); 
				
			}
			
			private function removeDataPrevisaoPopUp(obj:CloseEvent):void{
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
				//serviceController.findAllChekinByJobControl('');		
				serviceController.findAllChekinByJobControlCbx(campoPesquisa.text, JobControlBean(jobControlCbx.selectedItem).descricao);
			}		
			
			private function keyPressed(evt:KeyboardEvent):void{				
				if(evt.keyCode == 13){
					serviceController.findAllChekinByJobControlCbx(campoPesquisa.text, JobControlBean(jobControlCbx.selectedItem).descricao);					
				}			
			}
			
			private var detalhesProposta:PopupImprimirProposta;
			private function imprimeRelatorio(ev:Event):void{
				//serviceController.verificarGerarcaoProposta(CheckinBean(cheGrid.selectedItem).id);
				detalhesProposta = new PopupImprimirProposta();
				detalhesProposta.addEventListener(CloseEvent.CLOSE, removeDetalhesPropostaPopUp);
				PopUpManager.addPopUp(detalhesProposta, this, true);
				PopUpManager.centerPopUp(detalhesProposta);
				detalhesProposta.init(urlLogin, CheckinBean(cheGrid.selectedItem));
				
			}
			private function removeDetalhesPropostaPopUp(obj:CloseEvent):void{
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
				if(detalhesProposta.print){
					this.gerarRelatorio();
				}
			}
			private function gerarRelatorio():void{
				var uv:URLVariables = new URLVariables();
				uv.idChechIn = CheckinBean(cheGrid.selectedItem).id;
				uv.codCliente = CheckinBean(cheGrid.selectedItem).codCliente;
				uv.imprimirComPecas = ((detalhesProposta.imprimirComPecas.selected)?'S':'N');
				var url:URLRequest = new URLRequest(urlReport+"/PropostaManutencao");
				url.method = "POST";
				url.data = uv;
				navigateToURL(url,"_blank");
				
			}
			
			private var popupDataFaturamento:PopupDataFaturamento;
			private function dataFaturamento (ev:Event):void{	
				if(JobControlBean(jobControlCbx.selectedItem).descricao != CheckinBean(cheGrid.selectedItem).jobControl){
					Alert.show("Apenas a sessão da qual OS foi aberta(Job Control), que poderá adicionar a data de faturamento!", "Alerta");
					return;
				}
				//Orçamento aprovado ou rejeitado
				popupDataFaturamento = new PopupDataFaturamento();
				popupDataFaturamento.addEventListener(CloseEvent.CLOSE, removerDateFatutamentoPopUp);
					PopUpManager.addPopUp(popupDataFaturamento, this, true);
					PopUpManager.centerPopUp(popupDataFaturamento);
					if(CheckinBean (cheGrid.selectedItem).dataFaturamento != null){
						popupDataFaturamento.data.text = CheckinBean (cheGrid.selectedItem).dataFaturamento;
					}
			}
			
			private function removerDateFatutamentoPopUp(obj:CloseEvent):void{
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
				if(popupDataFaturamento.clickButtonOk){
					var checkin: CheckinBean = CheckinBean (cheGrid.selectedItem);
					if (checkin.numeroOs != null && popupDataFaturamento.data.text != ''){
						serviceController.saveDataFaturamento(checkin, popupDataFaturamento.data.text, popupDataFaturamento.tipoEncarramentoCbx.selectedItem.data);				
					}	
				}
			}
			
			private function obsOS(ev:Event):void{			
				var popUpObsOs:PopUpObsOS = new PopUpObsOS();				
				popUpObsOs.addEventListener(CloseEvent.CLOSE, removeoObsOSPopUp);
				PopUpManager.addPopUp(popUpObsOs, this, true);
				PopUpManager.centerPopUp(popUpObsOs);
				popUpObsOs.init(urlLogin, CheckinBean(cheGrid.selectedItem), this.usuarioBean);					
				
			}
			
			private function removeoObsOSPopUp(obj:CloseEvent):void{
				//serviceController.findAllChekinByJobControl('');
				//serviceController.findAllChekinByJobControlCbx(campoPesquisa.text, JobControlBean(jobControlCbx.selectedItem).descricao);
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
			}	
			
			private function datasOS(ev:Event):void{
				//serviceController.alterarFluxoProcessoOficina(CheckinBean(cheGrid.selectedItem).idSegmento,'I');
				serviceController.alterarFluxoProcessoOficinaJobControlVisualizarSegmento(CheckinBean(cheGrid.selectedItem).id,'I', null, JobControlBean(jobControlCbx.selectedItem).descricao);
				var popUpDatasOs:PopUpDatasOS = new PopUpDatasOS();				
				popUpDatasOs.addEventListener(CloseEvent.CLOSE, removeDatasOSPopUp);
				PopUpManager.addPopUp(popUpDatasOs, this, true);
				PopUpManager.centerPopUp(popUpDatasOs);
				popUpDatasOs.init(urlLogin, CheckinBean(cheGrid.selectedItem));					
				
			}
			
			private function removeDatasOSPopUp(obj:CloseEvent):void{				
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
			}	
			
			private function datasOrc(ev:Event):void{			
				var popUpDataOrcamento:PopupDataOrcamento = new PopupDataOrcamento();				
				popUpDataOrcamento.addEventListener(CloseEvent.CLOSE, removeDatasOrcPopUp);
				PopUpManager.addPopUp(popUpDataOrcamento, this, true);
				PopUpManager.centerPopUp(popUpDataOrcamento);
				popUpDataOrcamento.init(this.usuarioBean, CheckinBean(cheGrid.selectedItem).id, this.urlLogin, CheckinBean(cheGrid.selectedItem).tipoCliente);
				if(CheckinBean (cheGrid.selectedItem).dataOrcamento != null){
					popUpDataOrcamento.data.text = CheckinBean (cheGrid.selectedItem).dataOrcamento;
				}
					
			}
			
			private function removeDatasOrcPopUp(obj:CloseEvent):void{				
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
			}		
			private var popupData:PopupData;
			private function dataTerminoServico (ev:Event):void{	
				//Orçamento aprovado ou rejeitado
				if(CheckinBean (cheGrid.selectedItem).dataFaturamento == null){
					popupData = new PopupData();
					popupData.addEventListener(CloseEvent.CLOSE, removerDatePopUp);
					PopUpManager.addPopUp(popupData, this, true);
					PopUpManager.centerPopUp(popupData);
					if(CheckinBean (cheGrid.selectedItem).dataTerminoServico != null){
						popupData.data.text = CheckinBean (cheGrid.selectedItem).dataTerminoServico;
					}
				}else{
					Alert.show("Não é mais permitido alterar a data de término dos serviços, pois a OS já possui data de faturamento!", "Alerta");
				}
			}
			
			private function removerDatePopUp(obj:CloseEvent):void{
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
				if(popupData.clickButtonOk){
					var checkin: CheckinBean = CheckinBean (cheGrid.selectedItem);
					if (checkin.numeroOs != null && popupData.data.text != ''){
						serviceController.saveDataTerminoServicos(checkin, popupData.data.text, JobControlBean(jobControlCbx.selectedItem).descricao);				
					}	
				}
			}
			
			private var popupStatusNegociacao:PopupStatusNegociacao;
			private function descricaoStatusNegociacaoConsultor (ev:Event):void{	
				//Orçamento aprovado ou rejeitado
				popupStatusNegociacao = new PopupStatusNegociacao();
				popupStatusNegociacao.addEventListener(CloseEvent.CLOSE, removerPopUpDescricaoStatusNegociacaoConsultor);
				PopUpManager.addPopUp(popupStatusNegociacao, this, true);
				PopUpManager.centerPopUp(popupStatusNegociacao);
				popupStatusNegociacao.descricaoStatusNegociacaoTxt.text = CheckinBean (cheGrid.selectedItem).obsNegociacaoConsultor;
				if(CheckinBean (cheGrid.selectedItem).statusNegociacaoConsultor == 'A'){
					popupStatusNegociacao.init(CheckinBean (cheGrid.selectedItem).numeroOs, urlLogin);
				}
			}
			
			private function removerPopUpDescricaoStatusNegociacaoConsultor(obj:CloseEvent):void{
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
			}
			
			private	var servicoTerceiros:PopupServicoTerceiros;
			private function servicoTerceirosPopup(ev:Event):void{
				//if(CheckinBean (cheGrid.selectedItem).statusNegociacaoConsultor != 'A' && CheckinBean (cheGrid.selectedItem).statusNegociacaoConsultor != 'R'){
					servicoTerceiros = new PopupServicoTerceiros();
					servicoTerceiros.addEventListener(CloseEvent.CLOSE, removeServicoTerceirosPopUp);
					PopUpManager.addPopUp(servicoTerceiros, this, true);
					PopUpManager.centerPopUp(servicoTerceiros);
					servicoTerceiros.init(urlLogin, CheckinBean(cheGrid.selectedItem).id, CheckinBean(cheGrid.selectedItem).codCliente, CheckinBean(cheGrid.selectedItem));
				//} else {
				//	Alert.show("Não é mais permitido criar ou alterar serviços de terceiros!", "Alerta");
				//}
			}
			private function removeServicoTerceirosPopUp(obj:CloseEvent):void{
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
				var checkin: CheckinBean = CheckinBean (cheGrid.selectedItem);
				
				if (checkin.numeroOs != null && servicoTerceiros.isSave == true){
					serviceController.saveDataNegociacao(checkin, servicoTerceiros.codCliente);				
				}
				
			}
			private function segmentarOS(ev: Event): void{
				//serviceController.alterarFluxoProcessoOficina(CheckinBean(cheGrid.selectedItem).idSegmento,'I');
				serviceController.alterarFluxoProcessoOficinaJobControlVisualizarSegmento(CheckinBean(cheGrid.selectedItem).id,'I', null, JobControlBean(jobControlCbx.selectedItem).descricao);
				this.segmentarOSPopup();
			}
			
			private function onResultAlterarFluxoProcessoOficina(event:ResultEvent):void{
				if(event.result == true){
				}else{
				}				
			}
			
			private function segmentarOSPopup(): void{
				
				if (CheckinBean(cheGrid.selectedItem).numeroOs != "" && CheckinBean(cheGrid.selectedItem).numeroOs != null ){
					segmentoCampos = new CriarSegmentoOS();
					segmentoCampos.addEventListener(CloseEvent.CLOSE, removePopUpCriarOsSegmento);
					PopUpManager.addPopUp(segmentoCampos,this,true);
					PopUpManager.centerPopUp(segmentoCampos);					
					
					this.bloquearAcoesRecebedor(segmentoCampos);					
					
					segmentoCampos.init(urlLogin,CheckinBean(cheGrid.selectedItem).numeroOs,CheckinBean(cheGrid.selectedItem).id, CheckinBean(cheGrid.selectedItem), CheckinBean(cheGrid.selectedItem).serie.substr(0,4), usuarioBean, null);
					
				}
//				else{ Supervisor não pode criar OS.
//					segmentoCampos = new CriarSegmentoOS();
//					var criarOs:CriarOsEstimada = new CriarOsEstimada();
//					criarOs.addEventListener(CloseEvent.CLOSE, removePopUpCriarOsEstimada);
//					PopUpManager.addPopUp(criarOs,this,true);
//					PopUpManager.centerPopUp(criarOs)					
//					criarOs.init(urlLogin, CheckinBean(cheGrid.selectedItem).numeroOs, CheckinBean(cheGrid.selectedItem).cliente, CheckinBean(cheGrid.selectedItem).serie, CheckinBean(cheGrid.selectedItem).id, CheckinBean(cheGrid.selectedItem), CheckinBean(cheGrid.selectedItem).idOsPalm, usuarioBean, true);										
//					
//				}
			}
			/**
			 * Método para bloquear algumas ações que o perfil de recebedor não possui.
			 */
			private function bloquearAcoesRecebedor(segmentoCampos:CriarSegmentoOS):void{
				//segmentoCampos.segmentoGrid.doubleClickEnabled = false; // Para o perfil de Recebedor não é permitido incluir peças.
				segmentoCampos.sendPecasDbs.visible = false;
				segmentoCampos.sendPecasDbs.includeInLayout = false;					
				segmentoCampos.pendenciasDePecas.visible = false;
				segmentoCampos.pendenciasDePecas.includeInLayout = false;					
				segmentoCampos.verificaPecas.visible = false;
				segmentoCampos.verificaPecas.includeInLayout = false;			
			}	
			
			private function liberarOSDigitador(ev: Event):void{
				//serviceController.alterarFluxoProcessoOficinaJobControl(CheckinBean(cheGrid.selectedItem).id,'ADI', null, JobControlBean(jobControlCbx.selectedItem).descricao);
				if (CheckinBean(cheGrid.selectedItem).numeroOs != "" && CheckinBean(cheGrid.selectedItem).numeroOs != null){
					if(CheckinBean(cheGrid.selectedItem).dataLiberacaoPecas != null){
//						columnLiberarOS.dataField = "Liberado";						
						Alert.show("A OS já foi liberada.","Alerta!");
						return;
					}
					Alert.yesLabel = "Sim";
					Alert.noLabel = "Não";
					Alert.show("Deseja realmente liberar a OS?", "Liberar!", 3, this, alertClickHandlerLiberarOS);					
				}
			}
			
			private function alertClickHandlerLiberarOS(event:CloseEvent):void{
				if (event.detail==Alert.YES) {
					serviceController.liberarOSParaDigitador(CheckinBean(cheGrid.selectedItem), JobControlBean(jobControlCbx.selectedItem).descricao);
				}
			}
			
			private function onResultLiberarOSParaDigitador(event:ResultEvent):void{
				if(event.result == true){
					Alert.show("Operação realizada com sucesso","Alerta!");
					//serviceController.findAllChekinByJobControl('');
					serviceController.findAllChekinByJobControlCbx(campoPesquisa.text, JobControlBean(jobControlCbx.selectedItem).descricao);
				}else{
					Alert.show("Ocorreu um erro ao realizar a operação","Alerta!");
				}				
			}
			
			private function foto(ev:Event):void{
				var popUpFotos:PopupFotosOS = new PopupFotosOS();
								popUpFotos.addEventListener(CloseEvent.CLOSE, removeFotosOSPopUp);
								PopUpManager.addPopUp(popUpFotos, this, true);
								PopUpManager.centerPopUp(popUpFotos);
								popUpFotos.init(urlLogin, CheckinBean(cheGrid.selectedItem));
			}
			
			private function removeFotosOSPopUp(obj:CloseEvent):void{
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
			}	
			
			private function arquivo(ev:Event):void{
				var popUpArquivos:PopupArquivosOS= new PopupArquivosOS();
				popUpArquivos.addEventListener(CloseEvent.CLOSE, removeArquivoOSPopUp);
				PopUpManager.addPopUp(popUpArquivos, this, true);
				PopUpManager.centerPopUp(popUpArquivos);
				popUpArquivos.init(urlLogin, CheckinBean(cheGrid.selectedItem));
			}
			
			private function removeArquivoOSPopUp(obj:CloseEvent):void{
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
			}
			
			
			private function filtroCheckin():void{
				
				serviceController.findAllChekinByJobControlCbx(campoPesquisa.text, JobControlBean(jobControlCbx.selectedItem).descricao);
				if (campoPesquisa.text == ''){
					//findSituacaoOSCbx.selectedIndex = 0;
				}
			}
			
			//			private function dataOrcamento (ev:Event):void{	
			//				var checkin: CheckinBean = CheckinBean (cheGrid.selectedItem);
			//				checkin.hasSendDataOrcamento = 'S';	
			//				if (checkin.numeroOs != null ){
			//					serviceController.saveDataOrcamento(checkin);				
			//				}							
			//			}			
			//			private function imprimeRelatorio(ev:Event):void{
			//					serviceController.verificarGerarcaoProposta(CheckinBean(cheGrid.selectedItem).id);		
			//			}
			//			private function removeServicosTerceirosPopUp(obj:CloseEvent):void{
			//				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
			//			}
			//			private function enviarAprovacao (ev:Event):void{					
			//				serviceController.verificarAprovacaoProposta( CheckinBean (cheGrid.selectedItem).id);	
			//											
			//			}
			//			private var motivoRejeicaoOS:PopUpMotivoRejeicaoOS;
			//			private function verMotivoRejeicao (ev:Event):void{					
			//				motivoRejeicaoOS = new PopUpMotivoRejeicaoOS();
			//				motivoRejeicaoOS.addEventListener(CloseEvent.CLOSE, removeMotivoRejeicaoOSPopUp);
			//				PopUpManager.addPopUp(motivoRejeicaoOS, this, true);
			//				PopUpManager.centerPopUp(motivoRejeicaoOS);
			//				motivoRejeicaoOS.init(urlLogin, CheckinBean(cheGrid.selectedItem));
			//											
			//			}
			//			private function removeMotivoRejeicaoOSPopUp(obj:CloseEvent):void{
			//				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
			//			}
			
			private function dataOrcamento (ev:Event):void{	
				var checkin: CheckinBean = CheckinBean (cheGrid.selectedItem);
				checkin.hasSendDataOrcamento = 'S';	
				if (checkin.numeroOs != null ){
					serviceController.saveDataOrcamento(checkin);				
				}							
			}	
			
			
			private function removeServicosTerceirosPopUp(obj:CloseEvent):void{
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
			}
			private function enviarAprovacao (ev:Event):void{					
				serviceController.verificarAprovacaoProposta( CheckinBean (cheGrid.selectedItem).id);	
				
			}
			private var motivoRejeicaoOS:PopUpMotivoRejeicaoOS;
			private function verMotivoRejeicao (ev:Event):void{					
				motivoRejeicaoOS = new PopUpMotivoRejeicaoOS();
				motivoRejeicaoOS.addEventListener(CloseEvent.CLOSE, removeMotivoRejeicaoOSPopUp);
				PopUpManager.addPopUp(motivoRejeicaoOS, this, true);
				PopUpManager.centerPopUp(motivoRejeicaoOS);
				motivoRejeicaoOS.init(urlLogin, CheckinBean(cheGrid.selectedItem));
				
			}
			private function removeMotivoRejeicaoOSPopUp(obj:CloseEvent):void{
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
			}
			
			
			//			private	var servicoTerceiros:PopupServicoTerceiros;
			//			private function servicoTerceirosPopup(ev:Event):void{
			//				servicoTerceiros = new PopupServicoTerceiros();
			//				servicoTerceiros.addEventListener(CloseEvent.CLOSE, removeServicoTerceirosPopUp);
			//				PopUpManager.addPopUp(servicoTerceiros, this, true);
			//				PopUpManager.centerPopUp(servicoTerceiros);
			//				servicoTerceiros.init(urlLogin, CheckinBean(cheGrid.selectedItem).id, CheckinBean(cheGrid.selectedItem).codCliente, CheckinBean(cheGrid.selectedItem));
			//				
			//			}
			//			private function removeServicoTerceirosPopUp(obj:CloseEvent):void{
			//				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
			//				var checkin: CheckinBean = CheckinBean (cheGrid.selectedItem);
			//				
			//				if (checkin.numeroOs != null && servicoTerceiros.isSave == true){
			//					serviceController.saveDataNegociacao(checkin, servicoTerceiros.codCliente);				
			//				}
			//					
			//			}			
			//			private function dataPrevisao(ev:Event):void{
			//				var dataPrevisaoPopup:dataPrevisaoPopUp = new dataPrevisaoPopUp();
			//				dataPrevisaoPopup.addEventListener(CloseEvent.CLOSE, removeDataPrevisaoPopUp);
			//				PopUpManager.addPopUp(dataPrevisaoPopup, this, true);
			//				PopUpManager.centerPopUp(dataPrevisaoPopup);
			//				dataPrevisaoPopup.init(urlLogin, CheckinBean(cheGrid.selectedItem).id);
			//				
			//			}
			//			private function removeDataPrevisaoPopUp(obj:CloseEvent):void{
			//				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
			//				serviceController.findAllChekin('');		
			//			}			
			//			private function conclusao(ev:Event):void{
			//				
			//				Alert.yesLabel = "Sim";
			//				Alert.noLabel = "Não";				
			//				Alert.show("Deseja realmente concluir a ordem de serviço?", "Alerta", 3, this, alertClickHandler);
			//
			//			}
			//			
			//			private function alertClickHandler(event:CloseEvent):void {				
			//				if (event.detail==Alert.YES) {		// (event.detail==Alert.YES)		
			//					if (CheckinBean(cheGrid.selectedItem).hasConclusaoServico == null || CheckinBean(cheGrid.selectedItem).hasConclusaoServico == "N"){
			//						
			//						//					conclusaoPopup.addEventListener(CloseEvent.CLOSE, removeconclusaoPopup);
			//						//					PopUpManager.addPopUp(conclusaoPopup, this, true);
			//						//					PopUpManager.centerPopUp(conclusaoPopup);
			//						//					conclusaoPopup.init(urlLogin, CheckinBean(cheGrid.selectedItem).id);
			//						serviceController.saveDataConclusao(CheckinBean(cheGrid.selectedItem).id);
			//					}else{
			//						Alert.show("Não é possível reenviar data de conclusão", "Alerta!");
			//						return;
			//					}
			//				}else{				
			//					return;
			//				}			
			//			}
			//			private function removeconclusaoPopup(obj:CloseEvent):void{
			//				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
			//				serviceController.findAllChekin('');	
			//			}
			
			private function removePopUpCriarOsEstimada(obj:CloseEvent):void{
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
			}
			private function removePopUpCriarOsSegmento(obj:CloseEvent):void{
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
				CheckinBean(cheGrid.selectedItem).hasSendDbs = segmentoCampos.checkInObj.hasSendDbs;
				//serviceController.findAllChekinByJobControl('');	
				//serviceController.findAllChekinByJobControlCbx(campoPesquisa.text, JobControlBean(jobControlCbx.selectedItem).descricao);
			}
			private function doubleClickGrid():void{
				if(cheGrid.selectedItem != null && CheckinBean(cheGrid.selectedItem).tipoOperacao != "OSINTERNA"){
					var popup:PopupSelectTipoInspecao = new PopupSelectTipoInspecao();
					popup.addEventListener(CloseEvent.CLOSE, removePopUpInspecaoTree);
					PopUpManager.addPopUp(popup,this,true);
					PopUpManager.centerPopUp(popup)
					popup.init(urlLogin, CheckinBean(cheGrid.selectedItem));
				}
			}
			private function removePopUpInspecaoTree(obj:CloseEvent):void{
				PopUpManager.removePopUp(obj.currentTarget as IFlexDisplayObject);
			}		
			
			private function onResultFindAllChekinByJobControl(event:ResultEvent):void{
				cheGrid.dataProvider = null;
				cheGrid.dataProvider = ArrayCollection(event.result);
				serviceController.getUrlReport();
			}
			//			private function onResultVerificarGerarcaoProposta(event:ResultEvent):void{
			//				if(Boolean(event.result) == true){
			////					var ter:ServicosTerceirosPopUp = new ServicosTerceirosPopUp();
			////					ter.addEventListener(CloseEvent.CLOSE, removeServicosTerceirosPopUp);
			////					PopUpManager.addPopUp(ter,this,true);
			////					PopUpManager.centerPopUp(ter);
			////					ter.init(urlLogin, CheckinBean(cheGrid.selectedItem).id);	
			//					gerarRelatorio();
			//				}else{
			//					Alert.show("Não foi possível gerar relatório, verifique se todas as configurações do precificador para o modelo e prefixo da máquina.\n" +
			//						" Verifique também se as peças já foram enviadas para o DBS.", "Alerta");
			//				}
			//			}
			//			
			//			private function gerarRelatorio():void{
			//				var uv:URLVariables = new URLVariables();
			//				uv.idChechIn = CheckinBean(cheGrid.selectedItem).id;
			//				uv.codCliente = CheckinBean(cheGrid.selectedItem).codCliente;
			//				
			//				var url:URLRequest = new URLRequest(urlReport+"/PropostaManutencao");
			//				url.method = "POST";
			//				url.data = uv;
			//				navigateToURL(url,"_blank");
			//
			//			}
						private function changeComboSituacaoOS():void { //situacaoOSSQL
							if(findSituacaoOSCbx.selectedItem != null){
								if(findSituacaoOSCbx.selectedItem.valor == 'TODAS'){
									serviceController.findAllChekinByJobControl('TODAS');
								}else if(findSituacaoOSCbx.selectedItem.valor2 != 'isCheckIn'){
									if(findSituacaoOSCbx.selectedItem.valor1 == findSituacaoOSCbx.selectedItem.valor2 ){
										col1findSituacaoOS = findSituacaoOSCbx.selectedItem.valor1;
										col2findSituacaoOS = null;
										serviceController.findSituacaoOSFaturamentoSupervisor(col1findSituacaoOS);
									}else{
										col1findSituacaoOS = findSituacaoOSCbx.selectedItem.valor1;
										col2findSituacaoOS = findSituacaoOSCbx.selectedItem.valor2;
										
										serviceController.findSituacaoOSSupervisor(col1findSituacaoOS,col2findSituacaoOS );
									}
								}else{
									col1findSituacaoOS = findSituacaoOSCbx.selectedItem.valor1;
									col2findSituacaoOS = null;
									serviceController.findSituacaoOSSupervisor(col1findSituacaoOS);
								}
							}
							
						}
			private function onResultFindSituacaoOS(event:ResultEvent):void{
				cheGrid.dataProvider = null;
				cheGrid.dataProvider = ArrayCollection(event.result);
				serviceController.getUrlReport();
			}
						private function onResultFindSituacaoOSFaturamento(event:ResultEvent):void{
							cheGrid.dataProvider = null;
							cheGrid.dataProvider = ArrayCollection(event.result);
							serviceController.getUrlReport();
						}
						
			
			private function onResultGetUrlReport(event:ResultEvent):void{
				urlReport = String(event.result);
				serviceController.findAllJobControl();
			}
			
			private function onResultSaveDataTerminoServicos(event:ResultEvent):void{
				if(Boolean(event.result)){
					//serviceController.findAllChekinByJobControl('');
					serviceController.findAllChekinByJobControlCbx(campoPesquisa.text, JobControlBean(jobControlCbx.selectedItem).descricao);
				}else{
					Alert.show("Erro ao salvar data de Término de Serviços, verifique se todas as outras sessões já conclui o servico!", "Alerta");
				}
			}
			private function onResultSaveDataFaturamento(event:ResultEvent):void{
				if(Boolean(event.result)){
					//serviceController.findAllChekinByJobControl('');
					serviceController.findAllChekinByJobControlCbx(campoPesquisa.text, JobControlBean(jobControlCbx.selectedItem).descricao);
				}else{
					Alert.show("Erro ao salvar data de Faturamento!", "Alerta");
				}
			}
			
			private function onResultFindAllJobControl(event:ResultEvent):void{
				if(event.result != null){
					jobControlCbx.dataProvider = ArrayCollection (event.result);
					serviceController.findJobControlBySiglaSistema();
				}				
			}
			
			private function onResultFindJobControlBySiglaSistema(event:ResultEvent):void{
				if(event.result != null){
					var jobControlList:ArrayCollection = ArrayCollection(jobControlCbx.dataProvider);
					for(var i:int=0; i < jobControlList.length; i++){
						var job:JobControlBean = JobControlBean(jobControlList.getItemAt(i));
						if(job.descricao == String (event.result)){
							jobControlCbx.selectedIndex = i;
							break;
						}
					}
				}
			}
			
			//			private function onResultSaveDataOrcamento(event:ResultEvent):void{
			//				var array:Array = String(event.result).split("-"); 
			//				if (array.length == 1){
			//					Alert.show(String(event.result), "Alerta");	
			//					CheckinBean(cheGrid.selectedItem).hasSendDataOrcamento = 'S'; 					
			//					var arrayAux:ArrayCollection = ArrayCollection(cheGrid.dataProvider);
			//					cheGrid.dataProvider = null;
			//					cheGrid.dataProvider = arrayAux;
			//				}else{
			//					Alert.show(array[0], "Alerta");
			//				}
			//				serviceController.findAllChekin('');	
			//			}			
			private function onResultSaveDataNegociacao(event:ResultEvent):void{
				var array:Array = String(event.result).split("-"); 
				if (array.length == 1){
					Alert.show(String(event.result), "Alerta");
					
					serviceController.findAllChekinByJobControl('');						
				}else{
					Alert.show(array[0], "Alerta");
				}
			}
			
			//			private function onResultSaveDataConclusao(event:ResultEvent):void{
			//				if(event.result != false){
			//					Alert.show("Data salva com sucesso", "Alerta");	
			//					serviceController.findAllChekin('');	
			//				}else{
			//					Alert.show("Ocorreu um erro ao tentar salvar a data","Alerta");
			//				}
			//			}
			//			private function onResultVerificarAprovacaoProposta(event:ResultEvent):void{
			//				if(event.result == null){
			//					servicoTerceirosPopup(null);
			//				}else{
			//					Alert.show(String(event.result),"Alerta");
			//				}
			//			}

			protected function JobControlCbx_changeHandler(event:ListEvent):void
			{
					
				serviceController.findAllChekinByJobControlCbx(campoPesquisa.text, JobControlBean(jobControlCbx.selectedItem).descricao);
			}
			
			private function onResultFindAllChekinByJobControlCbx(event:ResultEvent):void{
				cheGrid.dataProvider = null;
				cheGrid.dataProvider = ArrayCollection(event.result);
			}
			
			private function onResultFindAllChekin(event:ResultEvent):void{
				cheGrid.dataProvider = null;
				cheGrid.dataProvider = ArrayCollection(event.result);
				serviceController.getUrlReport();
			}
			private function clickGrigSupervisor():void{
				campoPesquisa.text = CheckinBean(cheGrid.selectedItem).numeroOs;
			}

		]]>
	</mx:Script>
	<mx:ArrayCollection id="findSituacaoOS">
		
		<mx:Object label="Todas" valor="TODAS"/>
		<mx:Object label="O.S Iniciada" valor1="s.dataChegada" valor2="s.dataEntregaPedidos"/>
		<mx:Object label="O.S Entrega de Pedidos" valor1="s.dataEntregaPedidos" valor2="s.dataOrcamento"/>
		<mx:Object label="O.S em Orçamento" valor1="s.dataOrcamento" valor2="s.dataAprovacao"/>
		<mx:Object label="O.S Aprovada" valor1="s.dataAprovacao" valor2="s.dataPrevisaoEntrega"/>
		<mx:Object label="O.S com Previsão de Entrega" valor1="s.dataPrevisaoEntrega" valor2="s.dataTerminoServico"/>
		<mx:Object label="O.S Concluída" valor1="s.dataTerminoServico" valor2="s.dataFaturamento"/>
		<mx:Object label="O.S Faturada" valor1="s.dataFaturamento" valor2="s.dataFaturamento"/>
		<mx:Object label="O.S com Checkin" valor1="'S'" valor2="isCheckIn"/>
		<mx:Object label="O.S sem Checkin" valor1="'N'" valor2="isCheckIn"/>
		<mx:Object label="O.S Rejeitadas pelo consultor" valor1="R" valor2="isCheckIn"/>
	</mx:ArrayCollection>
	
	<mx:RemoteObject destination="service" invoke="{ProgressBarHelper.openProgressBar(this)}" id="serviceController" showBusyCursor="true" fault="{ProgressBarHelper.erro(event,urlLogin);ProgressBarHelper.removeProgressBar();}">
		<mx:method name="findAllChekinByJobControl" result="onResultFindAllChekinByJobControl(event);ProgressBarHelper.removeProgressBar()" />
		<mx:method name="findAllChekinByJobControlCbx" result="onResultFindAllChekinByJobControlCbx(event);ProgressBarHelper.removeProgressBar()" />
		<mx:method name="getUrlReport" result="onResultGetUrlReport(event);ProgressBarHelper.removeProgressBar()" />
		<mx:method name="liberarOSParaDigitador" result="onResultLiberarOSParaDigitador(event);ProgressBarHelper.removeProgressBar()" />		
		<mx:method name="findAllJobControl" result="onResultFindAllJobControl(event);ProgressBarHelper.removeProgressBar()" />
		<mx:method name="findJobControlBySiglaSistema" result="onResultFindJobControlBySiglaSistema(event);ProgressBarHelper.removeProgressBar()"/>
		<mx:method name="findSituacaoOSSupervisor" result="onResultFindSituacaoOS(event);ProgressBarHelper.removeProgressBar()" />
		<mx:method name="findAllChekin" result="onResultFindAllChekin(event);ProgressBarHelper.removeProgressBar()" />
		<mx:method name="saveDataTerminoServicos" result="onResultSaveDataTerminoServicos(event);ProgressBarHelper.removeProgressBar()" />
		<mx:method name="saveDataFaturamento" result="onResultSaveDataFaturamento(event);ProgressBarHelper.removeProgressBar()" />
		<mx:method name="alterarFluxoProcessoOficinaJobControl" result="onResultAlterarFluxoProcessoOficina(event);ProgressBarHelper.removeProgressBar()" />
		<mx:method name="alterarFluxoProcessoOficinaJobControlVisualizarSegmento" result="onResultAlterarFluxoProcessoOficina(event);ProgressBarHelper.removeProgressBar()" />
		<!--mx:method name="verificarAprovacaoProposta" result="onResultVerificarAprovacaoProposta(event);ProgressBarHelper.removeProgressBar()" /-->
		<mx:method name="findSituacaoOSFaturamentoSupervisor" result="onResultFindSituacaoOSFaturamento(event);ProgressBarHelper.removeProgressBar()" />
		<!--mx:method name="saveDataOrcamento" result="onResultSaveDataOrcamento(event);ProgressBarHelper.removeProgressBar()" /-->
	</mx:RemoteObject>
	
	<mx:VBox height="100%" width="100%" horizontalAlign="center">
		<mx:ApplicationControlBar height="50"  width="100%" horizontalAlign="center">
			<mx:Label text="Check-in Equipamento" fontWeight="bold"/>
		</mx:ApplicationControlBar>
		
		<mx:HBox width="100%">
			
			<mx:Label text="Pesquisar:"/>
			<mx:TextInput width="92" id="campoPesquisa" toolTip="Digite: Modelo, Série, ID Equipamento, Cliente ou Número OS para fazer uma pesquisa." />
			
			
			<mx:Label text="Job Control:"/>
			<mx:ComboBox id="jobControlCbx" change="JobControlCbx_changeHandler(event)" prompt="Selecione" labelField="descricao" toolTip="Busca pelos: campos de pesquisa e Job Control informado."></mx:ComboBox>
			<mx:Button label="Pesquisar" click="filtroCheckin()" toolTip="Busca pelos: campos de pesquisa e Job Control informado."/>
			<mx:Label text="Pesquisar pela situação:"/>
			<mx:ComboBox dataProvider="{findSituacaoOS}" id="findSituacaoOSCbx" prompt="Selecione" change="changeComboSituacaoOS()" labelField="label" selectedIndex="-1"></mx:ComboBox>
						
		</mx:HBox>	
		
		<mx:DataGrid width="100%" id="cheGrid" height="100%" doubleClickEnabled="true" doubleClick="doubleClickGrid()" click="clickGrigSupervisor()" textAlign="center">
			<mx:columns>
				<mx:DataGridColumn headerText="Docto." textAlign="center" dataField="id" width="40"/>				
				<mx:DataGridColumn headerText="Status" textAlign="center" width="40">				
					<mx:itemRenderer>
						<mx:Component>
							<mx:HBox horizontalAlign="center">
								<mx:Image horizontalAlign="center" width="15" height="15" source="{data.nomeImagemStatus}"/>
							</mx:HBox>
						</mx:Component>                            
					</mx:itemRenderer> 				
				</mx:DataGridColumn>				
				
				<mx:DataGridColumn headerText="Data" dataField="data" textAlign="center" width="155"/>
				<mx:DataGridColumn headerText="Tipo &#13;Cliente" dataField="tipoCliente" width="35"/>
				<mx:DataGridColumn headerText="Num. &#13;OS" dataField="numeroOs" textAlign="center" width="85"/>
				<mx:DataGridColumn headerText="Cliente" dataField="cliente" textAlign="center" width="155"/>
				<!--mx:DataGridColumn headerText="Note &#13; CRM" dataField="obsCrm"/>
				<mx:DataGridColumn headerText="Status &#13; CRM" dataField="statusCrm"/-->
				<mx:DataGridColumn headerText="Modelo" dataField="modelo" textAlign="center" width="55"/>
				<mx:DataGridColumn headerText="Série" dataField="serie" textAlign="center" width="95"/>
				<mx:DataGridColumn headerText="Job &#13;Control" dataField="jobControl" width="40" textAlign="left"/>
				<mx:DataGridColumn headerText="ID Equipamento" dataField="idEquipamento" textAlign="center" width="40"/>
				<mx:DataGridColumn headerText="Serv.&#13;Terceiros" textAlign="center" width="55">
					<mx:itemRenderer> 
						<mx:Component>
							<mx:VBox verticalGap="2" horizontalAlign="center">
								<mx:Image source="img/sendCrm.png"  width="15" buttonMode="true" toolTip="Serviços de Terceiros" height="15" click="{dispatchEvent(new Event('SERVICOSTERCEIROS', true))}"/>
							</mx:VBox>
						</mx:Component> 
					</mx:itemRenderer>
				</mx:DataGridColumn>
				<mx:DataGridColumn headerText="Status da &#13;Negociação" width="200">
					<mx:itemRenderer>
						<mx:Component>
							<mx:VBox verticalGap="2" horizontalAlign="center" backgroundColor="{(data.statusNegociacaoConsultor == 'A')?0x99FF99:(data.statusNegociacaoConsultor == 'P')?0xFFCC00:(data.statusNegociacaoConsultor == 'R')?0x99FF6347:0xFFFFFF}">
								<mx:Label text="{data.descricaoNegociacaoConsultor}" buttonMode="true" toolTip="Visualizar Observações do Status da Negociação" height="15" click="{dispatchEvent(new Event('DESCRICAOSTATUSNEGOCIACAOCONSULTOR', true))}"/>
							</mx:VBox>
						</mx:Component> 	
					</mx:itemRenderer>
				</mx:DataGridColumn>
				<mx:DataGridColumn headerText="Criar Data &#13;Previsão&#13;Entrega" width="110">
					<mx:itemRenderer> 
						<mx:Component>
							<mx:VBox verticalGap="2" horizontalAlign="center">
								<mx:Image source="img/date.png"  width="15" buttonMode="true" includeInLayout="{(data.statusNegociacaoConsultor == 'A' &amp;&amp; data.dataPrevisaoEntrega == null)?true:false}" visible="{(data.statusNegociacaoConsultor == 'A' &amp;&amp; data.dataPrevisaoEntrega == null)?true:false}" toolTip="Criar data de previsão de entrega" height="15" click="{dispatchEvent(new Event('DATAPREVISAO', true))}"/>
								<!--mx:Label text="{data.dataPrevisaoEntrega}" includeInLayout="{(data.statusNegociacaoConsultor == 'A' &amp;&amp; data.dataPrevisaoEntrega != null)?true:false}" visible="{(data.statusNegociacaoConsultor == 'A' &amp;&amp; data.dataPrevisaoEntrega != null)?true:false}" toolTip="Modificar data de previsão de entrega" height="15" click="{dispatchEvent(new Event('DATAPREVISAO', true))}" buttonMode="true" /-->
								<mx:Label text="{data.dataPrevisaoEntrega}" includeInLayout="{(data.dataPrevisaoEntrega != null)?true:false}" visible="{(data.dataPrevisaoEntrega != null)?true:false}" toolTip="Modificar data de previsão de entrega" height="15" click="{dispatchEvent(new Event('DATAPREVISAO', true))}" buttonMode="true" />
							</mx:VBox>
						</mx:Component> 
					</mx:itemRenderer>
				</mx:DataGridColumn>
				<mx:DataGridColumn headerText="Segm. &#13;OS" textAlign="center" width="60">
					<mx:itemRenderer> 
						<mx:Component>
							<mx:VBox verticalGap="2" horizontalAlign="center">
								<mx:Image source="img/detailed.png" width="15" buttonMode="true" height="15"  toolTip="Clique para: segmentar a os selecionada." click="{dispatchEvent(new Event('SEGMENTAROS', true))}"/>
							</mx:VBox>
						</mx:Component> 
					</mx:itemRenderer>
				</mx:DataGridColumn>	
				<mx:DataGridColumn headerText="Data &#13;Término&#13;dos serviços" width="90">
					<mx:itemRenderer> 
						<mx:Component>
							<mx:VBox verticalGap="2" horizontalAlign="center">
								<mx:Image source="img/date.png"  width="15" buttonMode="true" includeInLayout="{(data.statusNegociacaoConsultor == 'A' &amp;&amp; data.dataPrevisaoEntrega != null &amp;&amp; data.dataTerminoServico == null)?true:false}" visible="{(data.statusNegociacaoConsultor == 'A' &amp;&amp; data.dataPrevisaoEntrega != null &amp;&amp; data.dataTerminoServico == null)?true:false}" toolTip="Criar data término de serviço" height="15" click="{dispatchEvent(new Event('DATATERMINOSERVICO', true))}"/>
								<mx:Label text="{data.dataTerminoServico}" includeInLayout="{(data.dataPrevisaoEntrega != null &amp;&amp; data.dataTerminoServico != null)?true:false}" visible="{(data.dataPrevisaoEntrega != null &amp;&amp; data.dataTerminoServico != null)?true:false}" toolTip="Modificar data término de serviço" height="15" click="{dispatchEvent(new Event('DATATERMINOSERVICO', true))}" buttonMode="true" />
							</mx:VBox>
						</mx:Component> 
					</mx:itemRenderer>
				</mx:DataGridColumn>
				<mx:DataGridColumn headerText="Data &#13;Faturamento" width="90">
					<mx:itemRenderer> 
						<mx:Component>
							<mx:VBox verticalGap="2" horizontalAlign="center">
								<mx:Image source="img/date.png"  width="15" buttonMode="true" includeInLayout="{(data.statusNegociacaoConsultor == 'A' &amp;&amp; data.dataTerminoServico != null &amp;&amp; data.dataFaturamento == null)?true:false}" visible="{(data.statusNegociacaoConsultor == 'A' &amp;&amp; data.dataTerminoServico != null &amp;&amp; data.dataFaturamento == null)?true:false}" toolTip="Criar data de faturamento" height="15" click="{dispatchEvent(new Event('DATAFATURAMENTO', true))}"/>
								<mx:Label text="{data.dataFaturamento}" includeInLayout="{(data.dataFaturamento != null)?true:false}" visible="{(data.dataFaturamento != null)?true:false}" toolTip="Modificar data de faturamento" height="15" click="{dispatchEvent(new Event('DATAFATURAMENTO', true))}" buttonMode="true" />
							</mx:VBox>
						</mx:Component> 
					</mx:itemRenderer>
				</mx:DataGridColumn>
				<mx:DataGridColumn headerText="C.Serviço" textAlign="center" width="50" dataField="PIPNO"/>
				<mx:DataGridColumn headerText="Anexos" textAlign="center" width="50">
					<mx:itemRenderer> 
						<mx:Component>
							<mx:HBox verticalGap="2" horizontalAlign="center">
								<mx:Image source="img/camera.png" width="15" buttonMode="true" height="15"  toolTip="Clique para: anexar fotos a os." click="{dispatchEvent(new Event('FOTO', true))}"/>
								<mx:Image source="img/anexo.png" width="15" buttonMode="true" height="15"  toolTip="Clique para: anexar um arquivo a OS." click="{dispatchEvent(new Event('ARQUIVO', true))}"/>
							</mx:HBox>
						</mx:Component> 
					</mx:itemRenderer>
				</mx:DataGridColumn>				
				<mx:DataGridColumn headerText="Obs." textAlign="center" width="50">
					<mx:itemRenderer> 
						<mx:Component>
							<mx:VBox verticalGap="2" horizontalAlign="center">
								<mx:Image source="img/edit.png" width="15" buttonMode="true" height="15"  toolTip="Clique para: incluir/visualizar observação da OS." click="{dispatchEvent(new Event('OBS', true))}"/>
							</mx:VBox>
						</mx:Component> 
					</mx:itemRenderer>
				</mx:DataGridColumn>
				<mx:DataGridColumn headerText="Consultar" textAlign="center" width="60">
					<mx:itemRenderer> 
						<mx:Component>
							<mx:HBox verticalGap="2" horizontalAlign="center">
								<mx:Image source="img/datasOS.png" width="15" buttonMode="true" height="15"  toolTip="Clique para: visualizar o fluxo de data da OS." click="{dispatchEvent(new Event('DATASOS', true))}"/>
								<mx:Image source="img/dataOrc.png" width="15" buttonMode="true" height="15"  toolTip="Clique para: consultar data orçamento." click="{dispatchEvent(new Event('DATAORC', true))}"/>
							</mx:HBox>
						</mx:Component> 
					</mx:itemRenderer>
				</mx:DataGridColumn>				
				<mx:DataGridColumn headerText="PDF" textAlign="center" width="50">
					<mx:itemRenderer> 
						<mx:Component>
							<mx:VBox verticalGap="2" horizontalAlign="center">
								<mx:Image source="img/contrato.png"  width="15" buttonMode="true"  toolTip="Imprimir Relatório" height="15" click="{dispatchEvent(new Event('IMPRIMERELATORIO', true))}"/>
							</mx:VBox>
						</mx:Component> 
					</mx:itemRenderer>
				</mx:DataGridColumn>
				<mx:DataGridColumn headerText="Lib. &#13;OS&#13;Digitador" textAlign="center" id="columnLiberarOS" width="50">
					<mx:itemRenderer> 
						<mx:Component>
							<mx:VBox verticalGap="2" horizontalAlign="center">
								<mx:Image source="img/confirm.png" width="15" buttonMode="true" height="15"  toolTip="Clique para: liberar a os selecionada." visible="{(data.dataLiberacaoPecas != null)?false:true}" click="{dispatchEvent(new Event('LIBERAROSDIGITADOR', true))}"/>
							</mx:VBox>
						</mx:Component> 
					</mx:itemRenderer>
				</mx:DataGridColumn>
			</mx:columns>
		</mx:DataGrid>
	</mx:VBox>
	
</mx:Canvas>
